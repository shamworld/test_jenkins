(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-546d5861"],{"2ab5":function(t,e,s){},3167:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"containers bg-black1"},[s("navBar",{attrs:{title:"矿机商城",rightText:"购买记录"},on:{rightClick:t.toRecords}}),s("div",{staticClass:"contents t-white"},[s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[s("ul",t._l(t.list,(function(e){return s("li",{key:e.id,staticClass:"m-t-15 bg-view d-flex ai-center"},[s("van-image",{attrs:{src:e.logo,width:"77px",height:"77px"}}),s("div",{staticClass:"fs-md lh-5 mx-15 flex-1"},[s("h4",{staticClass:"fs-lg"},[t._v(t._s(e.name))]),s("p",{staticClass:"t-grey"},[t._v(" "+t._s(""+e.price+e.payName.toUpperCase()+" "+e.day+"天")+t._s("USDT"==e.payName.toUpperCase()?"（金本位）":"")+" ")]),s("div",{staticClass:"d-flex ai-center jc-between t-grey"},["USDT"==e.payName.toUpperCase()?s("p",[t._v(" "+t._s(e.outputHp+"+"+e.outputActive+"活跃度")+" ")]):s("p",[t._v(" "+t._s(""+e.outputHp+e.payName.toUpperCase()+"+"+e.outputActive+"活跃度")+" ")]),s("div",{ref:"item",refInFor:!0,staticClass:"buy t-center t-white",on:{click:function(s){return t.buyPopup(e)}}},[t._v(" 一键购买 ")])])])],1)})),0)])],1),s("van-popup",{model:{value:t.buyIsShow,callback:function(e){t.buyIsShow=e},expression:"buyIsShow"}},[s("div",{staticClass:"buypopup bg-view t-white fs-md"},[s("p",{staticClass:"fs-lg t-center"},[t._v("购买矿机")]),s("p",{staticClass:"d-flex jc-between m-t-20 t-white1"},[t._v(" 矿机名称 "),s("span",[t._v(t._s(t.content.name))])]),s("p",{staticClass:"d-flex jc-between m-t-30 t-white1"},[t._v(" 价格 "),"USDT"==t.content.payName?s("span",[t._v(t._s(t.content.day+"产出"+t.content.outputHp+"+"+t.content.outputActive+"活跃度"))]):s("span",[t._v(t._s(t.content.day+"产出"+t.content.outputHp+t.content.payName+"+"+t.content.outputActive+"活跃度"))])]),s("van-field",{staticClass:"buyinput m-t-10",attrs:{disabled:"",border:!1},scopedSlots:t._u([{key:"right-icon",fn:function(){return[s("span",[t._v(t._s(t.content.payName))])]},proxy:!0}]),model:{value:t.content.price,callback:function(e){t.$set(t.content,"price",e)},expression:"content.price"}}),s("p",{staticClass:"fs-min my-10 t-black2"},[t._v(t._s(t.content.payName)+"余额："+t._s(t.walletBalance))]),s("div",{staticClass:"d-flex jc-between fs-lg"},[s("div",{staticClass:"cancel t-center bg-green",on:{click:t.onClose}},[t._v("取消")]),s("div",{staticClass:"confirm t-center bg-green t-white",on:{click:t.confirm}},[t._v(" 确定 ")])])],1)])],1)},i=[],a={data:function(){return{buyIsShow:!1,list:[],content:{},isLoading:!1,walletBalance:null}},mounted:function(){this.init()},methods:{toRecords:function(){this.$router.push("/mall/records")},buyPopup:function(t){this.content=t,this.buyIsShow=!0,this.getwalletInfo()},onClose:function(){this.buyIsShow=!1},confirm:function(){var t=this;this.$toast.loading("loading..."),this.$axios.post(this.$api.millBuy,{millId:this.content.id}).then((function(e){t.$toast.clear(),200!=e.code?t.$toast(e.msg):t.$toast.success("购买成功"),t.buyIsShow=!1,t.requestList()}))},init:function(){this.requestList()},onRefresh:function(){var t=this;setTimeout((function(){t.requestList()}),1e3)},requestList:function(){var t=this;this.$axios.get(this.$api.millList).then((function(e){t.isLoading=!1;var s=e.data;t.list=[],t.list=s})).catch((function(e){t.isLoading=!1}))},getwalletInfo:function(){var t=this;this.$axios.post("/wallet/infoByName",{coinName:this.content.payName}).then((function(e){t.walletBalance=e.data.balance}))}}},o=a,c=(s("5f82"),s("2877")),l=Object(c["a"])(o,n,i,!1,null,"f7ec08ba",null);e["default"]=l.exports},"5f82":function(t,e,s){"use strict";var n=s("2ab5"),i=s.n(n);i.a}}]);
//# sourceMappingURL=chunk-546d5861.6d560f3c.js.map